(function(a){function A(){var b=m.scrollLeft(),c=m.width();a([d,p]).a("left",b+c/2);B&&a(e).a({left:b,top:m.scrollTop(),width:c,height:m.height()})}function C(b){b?a("object").add(D?"select":"embed").k(function(a,b){w[a]=[b,b.style.visibility];b.style.visibility="hidden"}):(a.k(w,function(a,b){b[0].style.visibility=b[1]}),w=[]);b=b?"bind":"unbind";m[b]("scroll resize",A);a(document)[b]("keydown",M)}function M(b){b=b.keyCode;var d=a.A;return 0<=d(b,c.i)?E():0<=d(b,c.r)?F():0<=d(b,c.t)?G():!1}function G(){return x(q)}
function F(){return x(r)}function x(a){0<=a&&(g=a,s=h[g][0],q=(g||(c.loop?h.length:0))-1,r=(g+1)%h.length||(c.loop?0:-1),H(),d.className="lbLoading",k=new Image,k.onload=N,k.src=s);return!1}function N(){d.className="";a(n).a({backgroundImage:"url("+s+")",visibility:"hidden",display:""});a(y).width(k.width);a([y,t,u]).height(k.height);a(I).n(h[g][1]||"");a(J).n((1<h.length&&c.j||"").replace(/{x}/,g+1).replace(/{y}/,h.length));0<=q&&(K.src=h[q][0]);0<=r&&(L.src=h[r][0]);f=n.offsetWidth;l=n.offsetHeight;
var b=Math.max(0,z-l/2);d.offsetHeight!=l&&a(d).b({height:l,top:b},c.d,c.e);d.offsetWidth!=f&&a(d).b({width:f,marginLeft:-f/2},c.d,c.e);a(d).B(function(){a(p).a({width:f,top:b+l,marginLeft:-f/2,visibility:"hidden",display:""});a(n).a({display:"none",visibility:"",opacity:""}).l(c.o,O)})}function O(){0<=q&&a(t).show();0<=r&&a(u).show();a(v).a("marginTop",-v.offsetHeight).b({marginTop:0},c.h);p.style.visibility=""}function H(){k.onload=null;k.src=K.src=L.src=s;a([d,n,v]).stop(!0);a([t,u,n,p]).m()}function E(){0<=
g&&(H(),g=q=r=-1,a(d).m(),a(e).stop().u(c.c,C));return!1}var m=a(window),c,h,g=-1,s,q,r,B,z,f,l,D=!window.XMLHttpRequest,w=[],k={},K=new Image,L=new Image,e,d,n,y,t,u,p,v,I,J;a(function(){a("body").append(a([e=a('<div id="lbOverlay" />')[0],d=a('<div id="lbCenter" />')[0],p=a('<div id="lbBottomContainer" />')[0]]).a("display","none"));n=a('<div id="lbImage" />').g(d).append(y=a('<div style="position: relative;" />').append([t=a('<a id="lbPrevLink" href="#" />').click(G)[0],u=a('<a id="lbNextLink" href="#" />').click(F)[0]])[0])[0];
v=a('<div id="lbBottom" />').g(p).append([a('<a id="lbCloseLink" href="#" />').add(e).click(E)[0],I=a('<div id="lbCaption" />')[0],J=a('<div id="lbNumber" />')[0],a('<div style="clear: both;" />')[0]])[0]});a.f=function(b,g,k){c=a.extend({loop:!1,s:0.8,c:400,d:400,e:"swing",q:250,p:250,o:400,h:400,j:"Image {x} of {y}",i:[27,88,67],t:[37,80],r:[39,78]},k);"string"==typeof b&&(b=[[b,g]],g=0);z=m.scrollTop()+m.height()/2;f=c.q;l=c.p;a(d).a({top:Math.max(0,z-l/2),width:f,height:l,marginLeft:-f/2}).show();
if(B=D||e.currentStyle&&"fixed"!=e.currentStyle.position)e.style.position="absolute";a(e).a("opacity",c.s).l(c.c);A();C(1);h=b;c.loop=c.loop&&1<h.length;return x(g)};a.v.f=function(b,c,d){c=c||function(a){return[a.href,a.title]};d=d||function(){return!0};var g=this;return g.C("click").click(function(){var h=this,k=0,f,e=0,l;f=a.w(g,function(a,b){return d.call(h,a,b)});for(l=f.length;e<l;++e)f[e]==h&&(k=e),f[e]=c(f[e],e);return a.f(f,k,b)})}})(jQuery);